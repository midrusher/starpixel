const chalk = require(`chalk`);
const { ReactionCollector, ChannelType, CategoryChannelChildManager, Collection } = require("discord.js");

module.exports = {
    name: 'voiceStateUpdate',
    async execute(oldState, newState) {
        const newChannel = newState.channel;
        const oldChannel = oldState.channel;
        const user = newState.guild.members.cache.get(newState.id).user || oldState.guild.members.cache.get(oldState.id).user 
        const member = newState.guild.members.cache.get(newState.id) || oldState.guild.members.cache.get(oldState.id)
        if (!member.roles.cache.has(`850336260265476096`)) return
        const premChannel = `981994469232619531`
       
        if (newChannel?.id === premChannel) {
            let channel = await newChannel.guild.channels.create({
                name: `ðŸ”’ãƒ»ÐŸÑ€Ð¸Ð²Ð°Ñ‚Ð½Ñ‹Ð¹`,
                type: ChannelType.GuildVoice,
                parent: newChannel.parentId
            });

            await newState.guild.members.cache.get(newState.id).voice.setChannel(channel)
        }

        if (oldChannel?.parentId === `589338972321218560` && oldChannel?.id !== `981994469232619531`) {
            if (oldChannel.members.size <= 0) await oldChannel.delete()
        }
    }
}